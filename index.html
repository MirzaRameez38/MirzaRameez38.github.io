<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Futuristic BMI Calculator</title>
    <style>
        :root {
            --primary: #00bcd4;
            --secondary: #7b1fa2;
            --dark: #121212;
            --light: #f5f5f5;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --male: #4a6dff;
            --female: #ff4a9c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent; /* Removes tap highlight on Android */
        }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 20% 35%, rgba(123, 31, 162, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 75% 65%, rgba(0, 188, 212, 0.15) 0%, transparent 50%);
            padding: 20px 0;
        }
        
        .container {
            width: 90%;
            max-width: 1000px;
            padding: 40px;
            border-radius: 20px;
            background-color: rgba(25, 25, 35, 0.85);
            backdrop-filter: blur(10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                transparent, 
                transparent, 
                transparent, 
                var(--primary)
            );
            animation: rotate 4s linear infinite;
            z-index: -1;
        }
        
        .container::after {
            content: '';
            position: absolute;
            inset: 3px;
            border-radius: 18px;
            background-color: rgba(25, 25, 35, 0.95);
            z-index: -1;
        }
        
        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        .title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--light);
            position: relative;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 2px;
        }
        
        /* Gender Selection with Hover Effects */
        .gender-selection {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }
        
        .gender-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 20px;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 15px;
        }
        
        .gender-option:hover, .gender-option:active {
            opacity: 1;
            transform: translateY(-5px);
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .gender-option.selected {
            opacity: 1;
            transform: scale(1.05);
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .gender-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .gender-icon::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            z-index: -1;
            transition: all 0.3s ease;
        }
        
        .gender-option:hover .gender-icon, 
        .gender-option:active .gender-icon {
            transform: scale(1.1);
        }
        
        .gender-icon.male::before {
            box-shadow: 0 0 15px rgba(74, 109, 255, 0.5), inset 0 0 15px rgba(74, 109, 255, 0.5);
        }
        
        .gender-icon.female::before {
            box-shadow: 0 0 15px rgba(255, 74, 156, 0.5), inset 0 0 15px rgba(255, 74, 156, 0.5);
        }
        
        .gender-option:hover .gender-icon.male::before,
        .gender-option:active .gender-icon.male::before {
            box-shadow: 0 0 25px rgba(74, 109, 255, 0.8), inset 0 0 25px rgba(74, 109, 255, 0.8);
        }
        
        .gender-option:hover .gender-icon.female::before,
        .gender-option:active .gender-icon.female::before {
            box-shadow: 0 0 25px rgba(255, 74, 156, 0.8), inset 0 0 25px rgba(255, 74, 156, 0.8);
        }
        
        .gender-icon svg {
            width: 40px;
            height: 40px;
            fill: var(--light);
            transition: all 0.3s ease;
        }
        
        .gender-option:hover svg,
        .gender-option:active svg {
            transform: scale(1.1);
        }
        
        .gender-label {
            font-size: 1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }
        
        .gender-option:hover .gender-label,
        .gender-option:active .gender-label {
            color: var(--primary);
        }
        
        /* Input Areas */
        .input-group {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .input-box {
            flex: 1;
            min-width: 280px;
            position: relative;
        }
        
        .input-box label {
            display: block;
            margin-bottom: 8px;
            font-size: 1rem;
            color: var(--light);
            opacity: 0.8;
        }
        
        /* Unit Selectors with Hover Effects */
        .unit-selector {
            display: flex;
            margin-top: 15px;
            margin-bottom: 15px;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .unit-selector:hover,
        .unit-selector:active {
            background-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .unit-selector label {
            flex: 1;
            padding: 12px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0;
            font-size: 0.9rem;
            position: relative;
            z-index: 1;
        }
        
        .unit-selector label:hover,
        .unit-selector label:active {
            color: rgba(255, 255, 255, 1);
        }
        
        .unit-selector input {
            display: none;
        }
        
        .unit-selector .slider {
            position: absolute;
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 8px;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        .unit-selector input:checked + label {
            color: var(--light);
            font-weight: 600;
        }
        
        /* Input Fields */
        .input-wrapper {
            display: flex;
            width: 100%;
            gap: 10px;
        }
        
        .input-field {
            flex: 1;
            position: relative;
        }
        
        .input-wrapper input {
            width: 100%;
            padding: 15px 20px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--light);
            font-size: 1.1rem;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .input-wrapper input:hover,
        .input-wrapper input:focus {
            border-color: var(--primary);
            background-color: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 10px rgba(0, 188, 212, 0.5);
        }
        
        .input-field small {
            display: block;
            margin-top: 5px;
            font-size: 0.8rem;
            opacity: 0.7;
            text-align: center;
        }
        
        /* Button with Enhanced Hover */
        button {
            padding: 15px 30px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border: none;
            border-radius: 10px;
            color: var(--light);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto;
            display: block;
            letter-spacing: 1px;
            text-transform: uppercase;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent
            );
            transition: 0.5s;
        }
        
        button:hover:before,
        button:active:before {
            left: 100%;
        }
        
        button:hover,
        button:active {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        /* Results */
        .result-container {
            margin-top: 40px;
            padding: 30px;
            border-radius: 15px;
            background-color: rgba(255, 255, 255, 0.05);
            text-align: center;
            transition: all 0.5s ease;
            transform-origin: center;
            transform: scale(0.9);
            opacity: 0;
            pointer-events: none;
        }
        
        .result-container.active {
            transform: scale(1);
            opacity: 1;
            pointer-events: all;
        }
        
        .bmi-value {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .bmi-category {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .bmi-description {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .formula-used {
            font-family: monospace;
            padding: 10px;
            margin: 15px 0;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            display: inline-block;
            font-size: 0.9rem;
            overflow-x: auto;
            max-width: 100%;
        }
        
        .bmi-scale {
            height: 10px;
            background: linear-gradient(to right, 
                #3498db, 
                #2ecc71, 
                #f1c40f, 
                #e67e22, 
                #e74c3c);
            border-radius: 5px;
            margin-bottom: 10px;
            position: relative;
        }
        
        .bmi-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: var(--light);
            border-radius: 50%;
            top: -5px;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            transition: left 1s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        .bmi-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            padding: 0 10px;
            font-size: 0.8rem;
            color: var(--light);
            opacity: 0.7;
        }
        
        /* Additional Information */
        .additional-info {
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .info-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .info-text {
            font-size: 0.9rem;
            line-height: 1.6;
            opacity: 0.8;
        }
        
        .health-insights {
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .insight-box {
            padding: 15px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }
        
        .insight-box:hover,
        .insight-box:active {
            background-color: rgba(255, 255, 255, 0.08);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .insight-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary);
        }
        
        .insight-content {
            font-size: 0.9rem;
            line-height: 1.5;
            opacity: 0.8;
        }
        
        .happy-note {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background-color: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--success);
            text-align: left;
            font-size: 0.95rem;
            line-height: 1.5;
            display: none;
            transition: all 0.3s ease;
        }
        
        .happy-note:hover,
        .happy-note:active {
            background-color: rgba(76, 175, 80, 0.15);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        /* Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.5;
            animation: floating linear infinite;
        }
        
        @keyframes floating {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                opacity: 0.5;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        /* Enhanced Mobile Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                width: 95%;
            }
            
            .title {
                font-size: 1.8rem;
            }
            
            .input-box {
                min-width: 100%;
            }
            
            .bmi-value {
                font-size: 2.5rem;
            }
            
            .bmi-category {
                font-size: 1.2rem;
            }
            
            .health-insights {
                grid-template-columns: 1fr;
            }
            
            .gender-icon {
                width: 60px;
                height: 60px;
            }
            
            .gender-icon svg {
                width: 30px;
                height: 30px;
            }
            
            .unit-selector label {
                padding: 15px 10px; /* Larger touch target */
                font-size: 0.85rem;
            }
            
            input, button {
                font-size: 16px; /* Prevent zoom on input focus on iOS */
                padding: 15px; /* Larger touch target */
            }
            
            button {
                width: 100%; /* Full width button for mobile */
                max-width: 300px;
            }
            
            .formula-used {
                font-size: 0.8rem;
                padding: 8px;
                white-space: pre-wrap; /* Allow formula to wrap on small screens */
            }
        }
        
        /* Android-specific optimizations */
        @media (max-width: 480px) {
            body {
                padding: 10px 0;
            }
            
            .container {
                padding: 15px;
            }
            
            .gender-selection {
                margin-bottom: 15px;
            }
            
            .gender-option {
                margin: 0 10px;
            }
            
            .input-group {
                gap: 15px;
                margin-bottom: 25px;
            }
            
            .unit-selector {
                margin-top: 10px;
                margin-bottom: 10px;
            }
            
            /* Make inputs taller for better touch targets on smaller screens */
            .input-wrapper input {
                padding: 16px;
                height: 56px; /* Recommended minimum touch target size */
            }
            
            /* Touch-friendly sliders */
            .unit-selector .slider {
                z-index: 0; /* Ensure slider doesn't block touch on labels */
            }
            
            /* Improve touch targets */
            .gender-option, .unit-selector label, button {
                min-height: 48px; /* Minimum recommended touch target size */
            }
            
            /* Android tap feedback */
            @keyframes tapFeedback {
                0% { transform: scale(1); }
                50% { transform: scale(0.97); }
                100% { transform: scale(1); }
            }
            
            /* Custom active state for Android */
            .gender-option:active, 
            button:active, 
            .unit-selector:active,
            .insight-box:active {
                animation: tapFeedback 0.3s ease;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <h1 class="title">BMI Calculator</h1>
        
        <!-- Gender Selection -->
        <div class="gender-selection">
            <div class="gender-option selected" id="male-option">
                <div class="gender-icon male">
                    <svg viewBox="0 0 24 24">
                        <path d="M9,9C10.29,9 11.5,9.41 12.47,10.11L17.58,5H13V3H21V11H19V6.41L13.89,11.5C14.59,12.5 15,13.7 15,15A6,6 0 0,1 9,21A6,6 0 0,1 3,15A6,6 0 0,1 9,9M9,11A4,4 0 0,0 5,15A4,4 0 0,0 9,19A4,4 0 0,0 13,15A4,4 0 0,0 9,11Z" />
                    </svg>
                </div>
                <span class="gender-label">Male</span>
            </div>
            
            <div class="gender-option" id="female-option">
                <div class="gender-icon female">
                    <svg viewBox="0 0 24 24">
                        <path d="M12,4A6,6 0 0,1 18,10C18,12.97 15.84,15.44 13,15.92V18H15V20H13V22H11V20H9V18H11V15.92C8.16,15.44 6,12.97 6,10A6,6 0 0,1 12,4M12,6A4,4 0 0,0 8,10A4,4 0 0,0 12,14A4,4 0 0,0 16,10A4,4 0 0,0 12,6Z" />
                    </svg>
                </div>
                <span class="gender-label">Female</span>
            </div>
        </div>
        
        <!-- Input Group -->
        <div class="input-group">
            <!-- Height Input -->
            <div class="input-box">
                <label>Height</label>
                
                <div class="unit-selector" id="height-unit-selector">
                    <input type="radio" id="height-cm" name="height-unit" checked>
                    <label for="height-cm">Centimeters</label>
                    
                    <input type="radio" id="height-ft" name="height-unit">
                    <label for="height-ft">Feet & Inches</label>
                    
                    <input type="radio" id="height-in" name="height-unit">
                    <label for="height-in">Inches</label>
                    
                    <div class="slider"></div>
                </div>
                
                <div class="input-wrapper" id="height-cm-input">
                    <div class="input-field">
                        <input type="number" inputmode="numeric" id="height-cm-value" placeholder="Enter height">
                        <small>centimeters</small>
                    </div>
                </div>
                
                <div class="input-wrapper" id="height-ft-input" style="display: none;">
                    <div class="input-field">
                        <input type="number" inputmode="numeric" id="height-ft-value" placeholder="Feet">
                        <small>ft</small>
                    </div>
                    <div class="input-field">
                        <input type="number" inputmode="numeric" id="height-in-value" placeholder="Inches">
                        <small>in</small>
                    </div>
                </div>
                
                <div class="input-wrapper" id="height-in-input" style="display: none;">
                    <div class="input-field">
                        <input type="number" inputmode="numeric" id="height-in-only-value" placeholder="Enter height">
                        <small>inches</small>
                    </div>
                </div>
            </div>
            
            <!-- Weight Input -->
            <div class="input-box">
                <label>Weight</label>
                
                <div class="unit-selector" id="weight-unit-selector">
                    <input type="radio" id="weight-kg" name="weight-unit" checked>
                    <label for="weight-kg">Kilograms</label>
                    
                    <input type="radio" id="weight-lb" name="weight-unit">
                    <label for="weight-lb">Pounds</label>
                    
                    <div class="slider"></div>
                </div>
                
                <div class="input-wrapper">
                    <div class="input-field">
                        <input type="number" inputmode="numeric" id="weight-value" placeholder="Enter weight">
                        <small id="weight-unit-label">kilograms</small>
                    </div>
                </div>
            </div>
        </div>
        
        <button id="calculate-btn">Calculate BMI</button>
        
        <!-- Results Container -->
        <div class="result-container" id="result-container">
            <div class="bmi-value" id="bmi-value">--.-</div>
            <div class="bmi-category" id="bmi-category">--</div>
            <div class="bmi-description" id="bmi-description">Enter your height and weight to calculate your Body Mass Index.</div>
            <div class="formula-used" id="formula-used">Formula will appear here after calculation</div>
            
            <div class="bmi-scale">
                <div class="bmi-marker" id="bmi-marker"></div>
            </div>
            <div class="bmi-labels">
                <span>16</span>
                <span>18.5</span>
                <span>25</span>
                <span>30</span>
                <span>40</span>
            </div>
            
            <div class="happy-note" id="happy-note">
                Great job maintaining a healthy weight! Your BMI is within the normal range, which is associated with lower health risks. Keep up the balanced diet and regular physical activity to maintain your health and wellbeing.
            </div>
            
            <div class="health-insights" id="health-insights">
                <div class="insight-box">
                    <div class="insight-title">Health Risks</div>
                    <div class="insight-content" id="health-risks">
                        Health risks will appear here after calculation.
                    </div>
                </div>
                
                <div class="insight-box">
                    <div class="insight-title">Precautions & Recommendations</div>
                    <div class="insight-content" id="precautions">
                        Recommendations will appear here after calculation.
                    </div>
                </div>
            </div>
            
            <div class="additional-info">
                <div class="info-title">What is BMI?</div>
                <div class="info-text">
                    Body Mass Index (BMI) is a measurement of body fat based on height and weight. It applies to adult men and women and is commonly used as a general indicator of whether a person has a healthy body weight for their height. BMI values are age-independent and the same for both sexes, though health implications may vary by gender.
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;
            const colors = ['#00bcd4', '#7b1fa2', '#4caf50', '#ff9800', '#e91e63'];
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Random properties
                const size = Math.random() * 10 + 5;
                const color = colors[Math.floor(Math.random() * colors.length)];
                const left = Math.random() * 100;
                const delay = Math.random() * 5;
                const duration = Math.random() * 10 + 10;
                
                // Apply styles
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.backgroundColor = color;
                particle.style.left = `${left}%`;
                particle.style.bottom = '-20px';
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // Initialize sliders
        function initializeSliders() {
            // Height unit slider
            const heightUnitSelector = document.getElementById('height-unit-selector');
            const heightUnitSlider = heightUnitSelector.querySelector('.slider');
            heightUnitSlider.style.width = '33.33%';
            heightUnitSlider.style.left = '0';
            
            // Weight unit slider
            const weightUnitSelector = document.getElementById('weight-unit-selector');
            const weightUnitSlider = weightUnitSelector.querySelector('.slider');
            weightUnitSlider.style.width = '50%';
            weightUnitSlider.style.left = '0';
        }
        
        // Detect if device is mobile
        function isMobileDevice() {
            return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
        }
        
        // Setup event listeners with mobile adaptations
        function setupEventListeners() {
            const isMobile = isMobileDevice();
            
            // Gender selection
            const maleOption = document.getElementById('male-option');
            const femaleOption = document.getElementById('female-option');
            let selectedGender = 'male';
            
            // For mobile, use touchstart for immediate feedback
            const touchEvent = isMobile ? 'touchstart' : 'click';
            
            maleOption.addEventListener(touchEvent, () => {
                maleOption.classList.add('selected');
                femaleOption.classList.remove('selected');
                selectedGender = 'male';
                document.documentElement.style.setProperty('--primary', '#4a6dff');
            });
            
            femaleOption.addEventListener(touchEvent, () => {
                femaleOption.classList.add('selected');
                maleOption.classList.remove('selected');
                selectedGender = 'female';
                document.documentElement.style.setProperty('--primary', '#ff4a9c');
            });
            
            // Height unit selectors
            const heightCmRadio = document.getElementById('height-cm');
            const heightFtRadio = document.getElementById('height-ft');
            const heightInRadio = document.getElementById('height-in');
            
            const heightCmInput = document.getElementById('height-cm-input');
            const heightFtInput = document.getElementById('height-ft-input');
            const heightInInput = document.getElementById('height-in-input');
            
            const heightUnitSelector = document.getElementById('height-unit-selector');
            const heightUnitSlider = heightUnitSelector.querySelector('.slider');
            
            // Helper function to handle touch events for height unit labels
            function handleHeightUnitTouch(radio) {
                radio.checked = true;
                
                // Manually trigger the change event
                const event = new Event('change');
                radio.dispatchEvent(event);
            }
            
            // Setup label touch events for mobile
            if (isMobile) {
                document.querySelector('label[for="height-cm"]').addEventListener('touchstart', () => {
                    handleHeightUnitTouch(heightCmRadio);
                });
                
                document.querySelector('label[for="height-ft"]').addEventListener('touchstart', () => {
                    handleHeightUnitTouch(heightFtRadio);
                });
                
                document.querySelector('label[for="height-in"]').addEventListener('touchstart', () => {
                    handleHeightUnitTouch(heightInRadio);
                });
                
                document.querySelector('label[for="weight-kg"]').addEventListener('touchstart', () => {
                    weightKgRadio.checked = true;
                    const event = new Event('change');
                    weightKgRadio.dispatchEvent(event);
                });
                
                document.querySelector('label[for="weight-lb"]').addEventListener('touchstart', () => {
                    weightLbRadio.checked = true;
                    const event = new Event('change');
                    weightLbRadio.dispatchEvent(event);
                });
            }
            
            heightCmRadio.addEventListener('change', () => {
                heightCmInput.style.display = 'flex';
                heightFtInput.style.display = 'none';
                heightInInput.style.display = 'none';
                heightUnitSlider.style.width = '33.33%';
                heightUnitSlider.style.left = '0';
            });
            
            heightFtRadio.addEventListener('change', () => {
                heightCmInput.style.display = 'none';
                heightFtInput.style.display = 'flex';
                heightInInput.style.display = 'none';
                heightUnitSlider.style.width = '33.33%';
                heightUnitSlider.style.left = '33.33%';
            });
            
            heightInRadio.addEventListener('change', () => {
                heightCmInput.style.display = 'none';
                heightFtInput.style.display = 'none';
                heightInInput.style.display = 'flex';
                heightUnitSlider.style.width = '33.33%';
                heightUnitSlider.style.left = '66.66%';
            });
            
            // Weight unit selector
            const weightKgRadio = document.getElementById('weight-kg');
            const weightLbRadio = document.getElementById('weight-lb');
            const weightUnitLabel = document.getElementById('weight-unit-label');
            
            const weightUnitSelector = document.getElementById('weight-unit-selector');
            const weightUnitSlider = weightUnitSelector.querySelector('.slider');
            
            weightKgRadio.addEventListener('change', () => {
                weightUnitLabel.textContent = 'kilograms';
                weightUnitSlider.style.width = '50%';
                weightUnitSlider.style.left = '0';
            });
            
            weightLbRadio.addEventListener('change', () => {
                weightUnitLabel.textContent = 'pounds';
                weightUnitSlider.style.width = '50%';
                weightUnitSlider.style.left = '50%';
            });
            
            // Calculate BMI
            const calculateBtn = document.getElementById('calculate-btn');
            calculateBtn.addEventListener(touchEvent, calculateBMI);
            
            // Enter key functionality
            document.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    calculateBtn.click();
                }
            });
            
            // For Android: Enhance focus on input fields with larger virtual keyboard
            if (isMobile) {
                const inputs = document.querySelectorAll('input[type="number"]');
                inputs.forEach(input => {
                    // inputmode="numeric" is already added in HTML for better mobile keyboards
                    input.addEventListener('focus', function() {
                        // Scroll to the input field for better visibility when keyboard appears
                        setTimeout(() => {
                            this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }, 300);
                    });
                });
            }
        }
        
        // Calculate BMI
        function calculateBMI() {
            const resultContainer = document.getElementById('result-container');
            const bmiValue = document.getElementById('bmi-value');
            const bmiCategory = document.getElementById('bmi-category');
            const bmiDescription = document.getElementById('bmi-description');
            const bmiMarker = document.getElementById('bmi-marker');
            const healthRisks = document.getElementById('health-risks');
            const precautions = document.getElementById('precautions');
            const happyNote = document.getElementById('happy-note');
            const formulaUsed = document.getElementById('formula-used');
            
            // Get selected gender
            const isMale = document.getElementById('male-option').classList.contains('selected');
            const selectedGender = isMale ? 'male' : 'female';
            
            // Get height based on selected unit
            let heightInMeters = 0;
            let heightDisplay = '';
            
            if (document.getElementById('height-cm').checked) {
                const heightCm = parseFloat(document.getElementById('height-cm-value').value);
                if (isNaN(heightCm) || heightCm <= 0) {
                    alert('Please enter a valid height in centimeters');
                    return;
                }
                heightInMeters = heightCm / 100;
                heightDisplay = `${heightCm} cm`;
            } else if (document.getElementById('height-ft').checked) {
                const heightFt = parseFloat(document.getElementById('height-ft-value').value);
                const heightIn = parseFloat(document.getElementById('height-in-value').value) || 0;
                
                if (isNaN(heightFt) || heightFt < 0) {
                    alert('Please enter a valid height in feet');
                    return;
                }
                
                const totalInches = (heightFt * 12) + heightIn;
                heightInMeters = totalInches * 0.0254;
                heightDisplay = `${heightFt}' ${heightIn}"`;
            } else if (document.getElementById('height-in').checked) {
                const heightInches = parseFloat(document.getElementById('height-in-only-value').value);
                if (isNaN(heightInches) || heightInches <= 0) {
                    alert('Please enter a valid height in inches');
                    return;
                }
                heightInMeters = heightInches * 0.0254;
                heightDisplay = `${heightInches} inches`;
            }
            
            // Get weight based on selected unit
            let weightInKg = 0;
            let weightDisplay = '';
            
            const weightValue = parseFloat(document.getElementById('weight-value').value);
            if (isNaN(weightValue) || weightValue <= 0) {
                alert('Please enter a valid weight');
                return;
            }
            
            if (document.getElementById('weight-kg').checked) {
                weightInKg = weightValue;
                weightDisplay = `${weightValue} kg`;
            } else {
                weightInKg = weightValue * 0.453592;
                weightDisplay = `${weightValue} lbs`;
            }
            
            // Calculate BMI
            const bmi = weightInKg / (heightInMeters * heightInMeters);
            const roundedBMI = Math.round(bmi * 10) / 10;
            
            // Display formula used
            formulaUsed.textContent = `BMI = weight(kg) / height²(m) = ${weightInKg.toFixed(1)} / ${heightInMeters.toFixed(2)}² = ${roundedBMI.toFixed(1)}`;
            
            // Hide happy note by default
            happyNote.style.display = 'none';
            
            // Determine BMI category, risks, and precautions based on gender
            let category = '';
            let description = '';
            let risks = '';
            let recommendations = '';
            let categoryColor = '';
            
            // BMI categories (same for both genders)
            if (roundedBMI < 16) {
                category = 'Severe Thinness';
                description = 'Your BMI indicates severe thinness.';
                categoryColor = '#3498db';
                
                if (selectedGender === 'male') {
                    risks = 'Increased risk of malnutrition, nutritional deficiencies, weakened immune system, decreased testosterone levels, reduced muscle mass, and energy deficiency. You may also experience delayed recovery from illness and injuries.';
                    
                    recommendations = 'Seek medical evaluation for underlying conditions. Focus on a high-protein, nutrient-dense diet with 3-5 meals per day. Consider strength training to build muscle mass. Aim for gradual weight gain of 0.5-1 lb per week. Consult with a dietitian who specializes in men\'s health.';
                } else {
                    risks = 'Increased risk of malnutrition, nutritional deficiencies, weakened immune system, hormonal imbalances, reproductive issues, amenorrhea (loss of menstrual cycle), bone density loss, and increased risk of osteoporosis.';
                    
                    recommendations = 'Seek immediate medical evaluation for underlying conditions. Focus on nutrient-dense foods rich in calcium and iron. Consider specialized dietary guidance for bone health. Aim for gradual weight gain with balanced nutrition. Monitor hormonal health and menstrual cycle regularity.';
                }
                
            } else if (roundedBMI < 18.5) {
                category = 'Underweight';
                description = 'Your BMI indicates you are underweight.';
                categoryColor = '#2980b9';
                
                if (selectedGender === 'male') {
                    risks = 'Potentially reduced muscle mass, lower energy levels, compromised immune function, and possible nutrient deficiencies. Men at this BMI may have lower testosterone levels and reduced athletic performance.';
                    
                    recommendations = 'Focus on increasing caloric intake with nutrient-dense foods. Incorporate strength training to build muscle mass. Include protein-rich foods with each meal. Consider tracking your caloric intake to ensure you are consuming enough for your activity level. Regular health check-ups to monitor nutritional status.';
                } else {
                    risks = 'Potential for iron-deficiency anemia, reduced bone density, irregular menstrual cycles, fertility challenges, and compromised immune function. Women have higher essential fat requirements, making being underweight potentially more impactful.';
                    
                    recommendations = 'Focus on nutrient-dense foods rich in iron, calcium and healthy fats. Ensure adequate protein intake. Consider a more gradual approach to exercise, particularly high-intensity activities. Consult with a healthcare provider about potential hormonal impacts and bone health. Regular check-ups to monitor iron levels and hormonal health.';
                }
                
            } else if (roundedBMI < 25) {
                category = 'Normal Weight';
                description = 'Your BMI indicates you have a normal weight.';
                categoryColor = '#2ecc71';
                
                if (selectedGender === 'male') {
                    risks = 'Lowest risk category for weight-related health problems. However, BMI does not account for muscle-to-fat ratio, which is particularly relevant for men who typically have higher muscle mass.';
                    
                    recommendations = 'Maintain a balanced diet with adequate protein intake. Regular strength training to maintain muscle mass, which naturally decreases with age. Focus on cardiovascular health through aerobic exercise. Regular health screenings, particularly for conditions more common in men (e.g., heart disease).';
                } else {
                    risks = 'Lowest risk category for weight-related health problems. However, women naturally have higher body fat percentages than men, and distribution of fat (particularly around the midsection) may be a health factor even at normal BMI.';
                    
                    recommendations = 'Maintain a balanced diet rich in calcium, iron, and folic acid. Regular physical activity including both strength training and cardiovascular exercise. Regular health screenings including bone density as appropriate for age. Monitor changes in weight distribution, particularly after hormonal changes like pregnancy or menopause.';
                }
                
                // Show happy note for normal weight
                happyNote.style.display = 'block';
                if (selectedGender === 'male') {
                    happyNote.innerHTML = 'Great job maintaining a healthy weight! Your BMI is within the normal range, which is associated with lower health risks. Continue with a balanced diet rich in protein and regular exercise including strength training to maintain muscle mass.';
                } else {
                    happyNote.innerHTML = 'Great job maintaining a healthy weight! Your BMI is within the normal range, which is associated with lower health risks. Continue with a balanced diet rich in calcium and iron, and maintain regular physical activity for overall wellbeing.';
                }
                
            } else if (roundedBMI < 30) {
                category = 'Overweight';
                description = 'Your BMI indicates you are overweight.';
                categoryColor = '#f1c40f';
                
                if (selectedGender === 'male') {
                    risks = 'Increased risk of heart disease, high blood pressure, type 2 diabetes, and sleep apnea. Men tend to accumulate excess weight around the abdomen ("apple shape"), which is associated with higher metabolic and cardiovascular risks.';
                    
                    recommendations = 'Focus on reducing refined carbohydrates and increasing lean protein sources. Incorporate both strength training and cardiovascular exercise. Monitor waist circumference (aim for under 40 inches). Consult with healthcare provider about cardiovascular risk factors. Consider moderate weight loss of 5-10% of body weight.';
                } else {
                    risks = 'Increased risk of heart disease, type 2 diabetes, and certain reproductive issues. Women may experience more weight gain around hips and thighs ("pear shape"), which carries less metabolic risk than abdominal fat, but can still impact overall health.';
                    
                    recommendations = 'Focus on balanced nutrition with portion control rather than severe caloric restriction. Incorporate both cardiovascular exercise and strength training to maintain muscle mass during weight loss. Monitor hormonal health, as weight can impact estrogen levels. Consider moderate weight loss of 5-10% of body weight.';
                }
                
            } else if (roundedBMI < 35) {
                category = 'Obesity Class I';
                description = 'Your BMI indicates Class I obesity.';
                categoryColor = '#e67e22';
                
                if (selectedGender === 'male') {
                    risks = 'Significantly higher risk of heart disease, stroke, type 2 diabetes, sleep apnea, and certain cancers. Men with obesity often have lower testosterone levels and may experience erectile dysfunction. Increased risk of metabolic syndrome, particularly with abdominal obesity.';
                    
                    recommendations = 'Comprehensive health assessment with your healthcare provider. Structured weight management plan combining dietary changes, regular physical activity, and possibly behavioral therapy. Focus on reducing processed foods and sugar-sweetened beverages. Regular monitoring of blood pressure, cholesterol, and blood glucose. Consider sleep evaluation for sleep apnea.';
                } else {
                    risks = 'Higher risk of heart disease, type 2 diabetes, certain cancers (including breast and endometrial), and polycystic ovary syndrome (PCOS). Obesity can impact hormonal balance, fertility, and pregnancy outcomes. Increased risk of menstrual irregularities.';
                    
                    recommendations = 'Comprehensive health assessment with your healthcare provider. Structured weight management plan tailored to womens nutritional needs. Focus on sustainable lifestyle changes rather than crash diets. Regular screening for related health conditions including hormonal disorders. Support for psychological aspects of weight management, as women face different societal pressures regarding weight.';
                }
                
            } else {
                category = 'Obesity Class II & III';
                description = 'Your BMI indicates Class II or III obesity.';
                categoryColor = '#e74c3c';
                
                if (selectedGender === 'male') {
                    risks = 'Severely elevated risk of cardiovascular disease, type 2 diabetes, obstructive sleep apnea, nonalcoholic fatty liver disease, and certain cancers. Men at this BMI level often experience hormonal disruptions, mobility issues, and significantly reduced life expectancy. Higher risk of sudden cardiac events.';
                    
                    recommendations = 'Seek comprehensive medical supervision for weight management. Consider a medically supervised weight loss program. Screening for comorbidities is essential, particularly cardiovascular and metabolic disorders. Tailored exercise program that accounts for joint stress and current fitness level. Medical or surgical interventions may be considered based on individual health assessment.';
                } else {
                    risks = 'Severely elevated risk of cardiovascular disease, type 2 diabetes, certain cancers, and reproductive disorders. Women with severe obesity may experience significant hormonal disruptions affecting fertility and menstruation. Increased pregnancy complications if applicable. Higher risk of depression and anxiety compared to men at similar BMI levels.';
                    
                    recommendations = 'Seek comprehensive medical supervision for weight management. Screening for related health conditions including hormonal disorders. Consider a multi-disciplinary approach including medical, nutritional, psychological, and physical activity components. Medical or surgical interventions may be considered based on individual health assessment. Address psychological health as part of treatment plan.';
                }
            }
            
            // Update BMI marker position (scale from 16 to 40 BMI)
            const scaledBMI = Math.min(Math.max(roundedBMI, 16), 40);
            const position = ((scaledBMI - 16) / (40 - 16)) * 100;
            bmiMarker.style.left = `${position}%`;
            
            // Display results with animation
            bmiValue.textContent = roundedBMI.toFixed(1);
            bmiCategory.textContent = category;
            bmiCategory.style.color = categoryColor;
            bmiDescription.textContent = description;
            healthRisks.textContent = risks;
            precautions.textContent = recommendations;
            
            // Animate result container
            resultContainer.classList.remove('active');
            setTimeout(() => {
                resultContainer.classList.add('active');
                // For mobile: scroll to results section after calculation
                if (isMobileDevice()) {
                    setTimeout(() => {
                        resultContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 500);
                }
            }, 100);
            
            // Add pulse animation to BMI value
            bmiValue.style.animation = 'none';
            setTimeout(() => {
                bmiValue.style.animation = 'pulse 1s ease-in-out';
            }, 10);
        }
        
        // Mobile detection function
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        
        // Initialize everything when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            initializeSliders();
            setupEventListeners();
            
            // Reduce particle count for mobile devices to improve performance
            if (isMobileDevice()) {
                const particles = document.querySelectorAll('.particle');
                // Remove half the particles on mobile
                for (let i = 0; i < particles.length / 2; i++) {
                    if (particles[i]) particles[i].remove();
                }
            }
        });
    </script>
</body>
</html>